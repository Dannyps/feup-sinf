<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sales Dashboard </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawBestSellerProductsChart);
        
        function drawBestSellerProductsChart() {
        $.get('http://localhost:5000/api/sales/bestsellers', function(response) {
            console.log(response);
            var chartData = [];
            for(var idx = 0; idx < response.length; ++idx) {
                var item = response[idx];
                chartData.push([item.year, item.A, item.B, item.C]);
            }

            // Create the data table.
            var data = new google.visualization.DataTable();
            data.addColumn('number', 'Year');
            data.addColumn('number', 'Product A');
            data.addColumn('number', 'Product B');
            data.addColumn('number', 'Product C');
            
            data.addRows(chartData);

            var options = {
                title: 'Units sold of best-sellers'
            };

            //create and draw the chart from DIV
            var chart = new google.visualization.LineChart(document.getElementById('linechart'));
            chart.draw(data, options);
        }, 'json');
        }
    </script>


    <script type="text/javascript">
      google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
      });
      google.charts.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country', 'Sales (m€)'],
          ['Germany', 200],
          ['United States', 300],
          ['Portugal', 400],
          ['Canada', 500],
          ['France', 600],
          ['RU', 10]
        ]);

        var options = {};

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
      }
    </script>
    
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">360º Company Dashboard</a>
            </div>
            <ul class="nav navbar-nav">
                <li>
                    <a href="overview.html">Dashboard</a>
                </li>
                <li class="active">
                    <a href="sales.html">Sales</a>
                </li>
                <li>
                    <a href="purchases.html">Purchases</a>
                </li>
                <li>
                    <a href="inventory.html">Inventory</a>
                </li>
                <li>
                    <a href="finances.html">Finances</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#">
                        <span class="glyphicon glyphicon-user"></span>Sign Up
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="glyphicon glyphicon-log-in"></span>Login
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-md-10 col-md-offset-1">
                <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group dropdown">
                        <button class="btn btn-timeFilter dropdown-toggle" type="button" data-toggle="dropdown">2017
                            <span class="caret"></span></button>
                            <ul class="dropdown-menu">
                                <li><a href="#">2017</a></li>
                                <li><a href="#">2016</a></li>
                                <li><a href="#">2015</a></li>
                            </ul>
                        </div>
                        <div class="btn-group" data-toggle="buttons">
                            <label class="btn btn-timeFilter active">
                                <input type="radio" name="options" autocomplete="off" checked>None
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Jan
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Fev
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Mar
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Apr
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Jun
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Jul
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Aug
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Set
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Oct
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Nov
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Dec
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <hr/>
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="row text-center">
                        <div class="col-sm-12">
                            <ul class="list-group box-shadow">
                                <li class="list-group-item">
                                    <h4 class="text-center" style="color: #3a5faf">Overview</h4>
                                </li>
                                <li class="list-group-item">
                                    <h4 class="sub-title">Total Sales</h4>
                                    <h3>154 175 €</h3>
                                </li>
                                <li class="list-group-item">
                                    <h4 class="sub-title">Growth</h4>
                                    <h3>12.4 %</h3>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <a href="#" style="display:block; text-align:center; color: #3a5faf">More Details</a>
                </div>
                <div class="col-sm-12 col-md-6">
                    <ul class="list-group box-shadow">
                        <li class="list-group-item">
                            <h4 class="text-center" style="color: #3a5faf">Best Selling</h4>
                        </li>
                        <li class="list-group-item">
                            <div id="linechart" style="height: 300px"></div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row">
                
                <div class="col-sm-12 col-md-6">
                    <div class="row">
                        <div class="col-sm-12">
                            <ul class="list-group box-shadow">
                                <li class="list-group-item">
                                    <h4 class="text-center" style="color: #3a5faf">Best Costumers</h4>
                                </li>
                                <li class="list-group-item">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Sales</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Continente</td>
                                                <td>91 323 €</td>
                                            </tr>
                                            <tr>
                                                <td>Jerónimo Martins</td>
                                                <td>32 340 €</td>
                                            </tr>
                                            <tr>
                                                <td>Costumer C</td>
                                                <td>20 323 €</td>
                                            </tr>
                                            <tr>
                                                <td>Other</td>
                                                <td>10 189 €</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <a href="#" style="display:block; text-align:center; color: #3a5faf">More Details</a>
                </div>
                <div class="col-sm-12 col-md-6">
                    <div class="row">
                        <div class="col-sm-12">
                            <ul class="list-group box-shadow">
                                <li class="list-group-item">
                                    <h4 class="text-center" style="color: #3a5faf">Sales By Country</h4>
                                </li>
                                <li class="list-group-item">
                                    <div id="regions_div"></div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <a href="#" style="display:block; text-align:center; color: #3a5faf">More Details</a>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../javascript/sales.js"></script>
</body>
</html>
