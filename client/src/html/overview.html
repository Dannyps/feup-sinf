<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Main Dashboard </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css">
    
    <script src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        
        google.charts.setOnLoadCallback(drawLineChart);
        
        google.charts.setOnLoadCallback(drawPieChart);
        
        google.charts.setOnLoadCallback(drawLineChart2);
        
        function drawLineChart() {
            var data = google.visualization.arrayToDataTable([
            ['Month', 'Sales'],
            ['Jan',  2000],
            ['Fev',  2000],
            ['Mar',  3000]
            ]);
            
            var options = {
                title: 'Company Sales',
                curveType: 'function',
                legend: { position: 'bottom' },
                vAxis: {minValue: 0}
            };
            
            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
            
            chart.draw(data, options);
            
        }
        
        function drawLineChart2() {
            var data = google.visualization.arrayToDataTable([
            ['Month', 'Sales'],
            ['Jan',  -3000],
            ['Fev',  -2000],
            ['Mar',  200]
            ]);
            
            var options = {
                title: 'Financial Balance',
                curveType: 'function',
                legend: { position: 'bottom' },
                
            };
            
            var chart = new google.visualization.LineChart(document.getElementById('line_chart'));
            
            chart.draw(data, options);
            
        }
        
        
        function drawPieChart() {
            $.getJSON({
                url: 'http://localhost:5000/api/purchases',
                success: (data) => {
                    console.log(data);
                },
                error: (error) => {
                    console.error();
                }
            });

        
        // Create our data table out of JSON data loaded from server.
        var data2 = new google.visualization.DataTable(data);

        console.log(data2);

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data2, {width: 400, height: 240});
            
        }
        
        
        function drawColumnChart() {
            
            var data = new google.visualization.DataTable();
            data.addColumn('time', 'Time');
            data.addColumn('stock', 'Stock value');
            
            data.addRows([
            [{v: [8, 0, 0], f: '8 am'}, 1],
            [{v: [9, 0, 0], f: '9 am'}, 2],
            [{v: [10, 0, 0], f:'10 am'}, 3],
            [{v: [11, 0, 0], f: '11 am'}, 4],
            [{v: [12, 0, 0], f: '12 pm'}, 5],
            [{v: [13, 0, 0], f: '1 pm'}, 6],
            [{v: [14, 0, 0], f: '2 pm'}, 7],
            [{v: [15, 0, 0], f: '3 pm'}, 8],
            [{v: [16, 0, 0], f: '4 pm'}, 9],
            [{v: [17, 0, 0], f: '5 pm'}, 10],
            ]);
            
            var options = {
                title: 'Stock Value Over Time',
                hAxis: {
                    title: 'Time',
                    format: 'h:mm a',
                    viewWindow: {
                        min: [7, 30, 0],
                        max: [17, 30, 0]
                    }
                },
                vAxis: {
                    title: 'Rating (scale of 1-10)'
                }
            };
            
            var chart = new google.visualization.ColumnChart(
            document.getElementById('column_div'));
            
            chart.draw(data, options);
        }
        
        
    </script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
            ['Year', 'Product A', 'Product B', 'Product C', 'Product D'],
            ['2014',  1170,      460, 332, 102],
            ['2015',  660,       1120, 400, 850],
            ['2016',  1030,      540, 600, 910],
            ['2017',  980,      830, 540, 1030],
            ['2018',  1650,      1120, 730, 870]
            ]);
            
            var options = {
                hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},
                vAxis: {minValue: 0},
                legend: { position: 'bottom' }
            };
            
            var chart = new google.visualization.AreaChart(document.getElementById('curve_chart_p'));
            chart.draw(data, options);
        }
        function testFetch () {
            $.getJSON({
                url: 'http://localhost:5000/api/purchases',
                success: (data) => {
                    console.log(data);
                },
                error: (error) => {
                    console.error();
                }
            });
        }

    </script>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">360º Company Dashboard</a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="overview.html">Overview</a>
                </li>
                <li>
                    <a href="sales.html">Sales</a>
                </li>
                <li>
                    <a href="purchases.html">Purchases</a>
                </li>
                <li>
                    <a href="inventory.html">Inventory</a>
                </li>
                <li>
                    <a href="finances.html">Finances</a>
                </li>
            </ul>
        </div>
    </nav>
    
    
    <div class="container">
        <button onclick="testFetch()">Fetch</button>     
        <div class="row">
            <div class="col-sm-12 col-md-10 col-md-offset-1">
                <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group dropdown">
                        <button class="btn btn-timeFilter dropdown-toggle" type="button" data-toggle="dropdown">2017
                            <span class="caret"></span></button>
                            <ul class="dropdown-menu">
                                <li><a href="#">2018</a></li>
                                <li><a href="#">2017</a></li>
                                <li><a href="#">2016</a></li>
                                <li><a href="#">2015</a></li>
                            </ul>
                        </div>
                        <div class="btn-group" data-toggle="buttons">
                            <label class="btn btn-timeFilter active">
                                <input type="radio" name="options" autocomplete="off" checked>None
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Jan
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Fev
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Mar
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Apr
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Jun
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Jul
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Aug
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Set
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Oct
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off" checked>Nov
                            </label>
                            <label class="btn btn-timeFilter">
                                <input type="radio" name="options" autocomplete="off">Dec
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <hr/>
            <div class="row dashboard">
                <a href="sales.html">
                    <div class="col-sm-12 col-md-6">
                        <div class="row text-center">
                            <div class="col-sm-12">
                                <ul class="list-group box-shadow">
                                    <li class="list-group-item">
                                        <h4 class="text-center title" style="color: #3a5faf">Sales Overview</h4>
                                    </li>
                                    <li class="list-group-item" style="color: #333">
                                        <h4 class="sub-title">Total Sales </h4>
                                        <h3>154 175 €</h3>
                                    </li>
                                    <li class="list-group-item">
                                        <div id="curve_chart"></div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </a>
                
                <a href="purchases.html">
                    <div class="col-sm-12 col-md-6">
                        <div class="row text-center">
                            <div class="col-sm-12">
                                <ul class="list-group box-shadow">
                                    <li class="list-group-item">
                                        <h4 class="text-center title" style="color: #3a5faf">Purchases Overview</h4>
                                    </li>
                                    <li class="list-group-item" style="color: #333">
                                        <h4 class="sub-title">Total Supplier Expenses </h4>
                                        <h3>87 000 €</h3>
                                    </li>
                                    <li class="list-group-item">
                                        <div id="curve_chart_p"></div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            <div class="row dashboard">
                <a href="inventory.html">
                    <div class="col-sm-12 col-md-6">
                        <div class="row text-center">
                            <div class="col-sm-12">
                                <ul class="list-group box-shadow">
                                    <li class="list-group-item">
                                        <h4 class="text-center title" style="color: #3a5faf">Inventory Overview</h4>
                                    </li>
                                    <li class="list-group-item values" style="color: #333">
                                        <h4 class="sub-title">Total Stock Value </h4>
                                        <h3>111 000 €</h3>
                                    </li>
                                    <li class="list-group-item">
                                        <h4 class="text-center" style="color: #3a5faf">Most urgent to buy</h4>
                                        <ul class="list-group">
                                            <li class="list-group-item list-group-item-danger">Book A <span class="badge">3</span></li>
                                            <li class="list-group-item list-group-item-warning">Book B <span class="badge">25</span></li>
                                            <li class="list-group-item list-group-item-warning">Book C <span class="badge">47</span></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </a>
                
                <a href="finances.html">
                    <div class="col-sm-12 col-md-6">
                        <div class="row text-center">
                            <div class="col-sm-12">
                                <ul class="list-group box-shadow">
                                    <li class="list-group-item">
                                        <h4 class="text-center title" style="color: #3a5faf">Finances Overview</h4>
                                    </li>
                                    <li class="list-group-item" style="color: #333">
                                        <h4 class="sub-title"> Cash balance </h4>
                                        <h3>34 000 €</h3>
                                    </li>
                                    <li class="list-group-item">
                                        <div id="line_chart"></div>
                                    </li>
                                    <li class="list-group-item">
                                        <div id="chart_div"></div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../javascript/dashboard.js"></script>
</body>
</html>